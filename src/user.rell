module;
import balance.*;
import utils.*;

entity user {
  key pubkey; 
  key username: text;
}

operation create_user(username: name) {
  
  val pubkey = get_signer_pkey();
  require(username != "");
  var new_user = create user (pubkey, username);
  create balance (new_user, INITIAL_BALANCE); 
}

query get_user_by_username(username: text){
  return user @?{username};
}

