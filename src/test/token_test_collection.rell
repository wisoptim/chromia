@test module;
import ^^.user.{user, create_user};
import ^^.token.{token, mint_token};
import ^^.token_collection.{token_collection, create_collection };
 
function test_create_collection() {

    val alice_pk = rell.test.keypairs.alice.pub;
    val alice_un = 'Alice';
    val token_name = "Token name";
    val collection_name = "Collection name";
    val token_text = "BestToken";
    
    val tx1 = rell.test.tx().op(create_user(alice_un)).sign(rell.test.keypairs.alice);
    val tx2 = rell.test.tx().op(mint_token(token_name, token_text)).sign(rell.test.keypairs.alice);
    rell.test.block().tx(tx1).tx(tx2).run();

    val tx3 = rell.test.tx().op(create_collection(collection_name, token_name)).sign(rell.test.keypairs.alice);
    rell.test.block().tx(tx3).run();
    assert_equals(token_collection@*{}(.name), [collection_name]);
}
  